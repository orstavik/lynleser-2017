<link rel="import" href="lynleser-paragraph.html">

<dom-module id="lynleser-fulltext">
  <template>
    <style>
      :host {
        display: block;
        background: white;
      }
      #text {
        display: block;
        min-height: 60vh;
        overflow-y: scroll;
        overflow: hidden;
      }
    </style>

    <lynleser-paragraph id="text" paragraph="[[currentParagraph]]"></lynleser-paragraph>
  </template>
  <script>
    class LynleserFulltext extends Polymer.Element {
      static get is() {
        return "lynleser-fulltext";
      }

      static get properties() {
        return {
          book: Object,
          paragraphs: {
            type: Array,
            computed: "_makeParagraphs(book)"
          },
          currentParagraph: {
            type: Object,
            computed: "_makeCurrentPaaragraph(paragraphs, book.position)"
          }
        };
      }

      _makeParagraphs(book) {
        if (!book || !book.body)
          return undefined;
        let ps = [];
        for (let child of book.body.body.children)
          ps.push(child)
        return ps;
      }

      _makeCurrentPaaragraph(paragraphs, position) {
        if (!paragraphs || paragraphs.length === 0)
          return "No book or empty book...";
        if (position >= paragraphs.length)
          return "Finished!!";
        return paragraphs[position||0];
      }
    }
    customElements.define(LynleserFulltext.is, LynleserFulltext);
  </script>
</dom-module>